#1 Module initialization
#2 Added access point for changing themes
#3 Correctly fall back to user agent, default, first then no theme